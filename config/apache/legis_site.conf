# Apache virtual host for the Legis 2025 portal.
# Replace the placeholders with the absolute paths and domains used on your server.

<VirtualHost *:80>
    ServerName elections.example.com
    ServerAdmin admin@example.com

    # Root of the Django project checkout on the server.
    DocumentRoot /var/www/legis2025

    # mod_wsgi daemon keeps the site isolated from other vhosts.
    WSGIDaemonProcess legis_site \
        python-home=/var/www/legis2025/.venv \
        python-path=/var/www/legis2025 \
        processes=2 \
        threads=4
    WSGIProcessGroup legis_site
    WSGIApplicationGroup %{GLOBAL}
    WSGIScriptAlias / /var/www/legis2025/legis_site/wsgi.py

    # Static assets collected via `python manage.py collectstatic`.
    Alias /static/ /var/www/legis2025/static/
    <Directory /var/www/legis2025/static/>
        Require all granted
    </Directory>

    # Media (optional) â€” comment out if not used.
    Alias /media/ /var/www/legis2025/media/
    <Directory /var/www/legis2025/media/>
        Require all granted
    </Directory>

    <Directory /var/www/legis2025/legis_site>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    # Environment for the Django application.
    SetEnv DJANGO_SETTINGS_MODULE legis_site.settings
    SetEnv PYTHONUNBUFFERED 1

    ErrorLog ${APACHE_LOG_DIR}/legis_site_error.log
    CustomLog ${APACHE_LOG_DIR}/legis_site_access.log combined

    # Remove or restrict if server-status is not desired.
    <Location "/server-status">
        SetHandler server-status
        Require local
    </Location>
</VirtualHost>
